'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _desired = require('../desired');

var _helpersSession = require('../helpers/session');

_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('general', function () {
  var _this = this;

  var driver = undefined;
  before(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap((0, _helpersSession.initDriver)(_desired.APIDEMOS_CAPS));

        case 2:
          driver = context$2$0.sent;

        case 3:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });
  after(function callee$1$0() {
    return _regeneratorRuntime.async(function callee$1$0$(context$2$0) {
      while (1) switch (context$2$0.prev = context$2$0.next) {
        case 0:
          context$2$0.next = 2;
          return _regeneratorRuntime.awrap(driver.quit());

        case 2:
        case 'end':
          return context$2$0.stop();
      }
    }, null, _this);
  });

  describe('startActivity', function () {
    var _this2 = this;

    it('should launch a new package and activity', function callee$2$0() {
      var appPackage, appActivity, startAppPackage, startAppActivity, newAppPackage, newAppActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 2:
            appPackage = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 5:
            appActivity = context$3$0.sent;

            appPackage.should.equal('io.appium.android.apis');
            appActivity.should.equal('.ApiDemos');

            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.view.SplitTouchView';
            context$3$0.next = 12;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 12:
            context$3$0.next = 14;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 14:
            newAppPackage = context$3$0.sent;
            context$3$0.next = 17;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 17:
            newAppActivity = context$3$0.sent;

            newAppPackage.should.equal(startAppPackage);
            newAppActivity.should.equal(startAppActivity);

          case 20:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
    it('should be able to launch activity with custom intent parameter category', function callee$2$0() {
      var startAppPackage, startAppActivity, startIntentCategory, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = 'io.appium.android.apis.app.HelloWorld';
            startIntentCategory = 'appium.android.intent.category.SAMPLE_CODE';
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity, intentCategory: startIntentCategory }));

          case 5:
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 7:
            appActivity = context$3$0.sent;

            appActivity.should.include('HelloWorld');

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
    it('should be able to launch activity with dontStopAppOnReset = true', function callee$2$0() {
      var startAppPackage, startAppActivity, appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.os.MorseCode';
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 6:
            appPackage = context$3$0.sent;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 9:
            appActivity = context$3$0.sent;

            appPackage.should.equal(startAppPackage);
            appActivity.should.equal(startAppActivity);

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
    it('should be able to launch activity with dontStopAppOnReset = false', function callee$2$0() {
      var startAppPackage, startAppActivity, appPackage, appActivity;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            startAppPackage = 'io.appium.android.apis';
            startAppActivity = '.os.MorseCode';
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.startActivity({ appPackage: startAppPackage, appActivity: startAppActivity }));

          case 4:
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(driver.getCurrentPackage());

          case 6:
            appPackage = context$3$0.sent;
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(driver.getCurrentActivity());

          case 9:
            appActivity = context$3$0.sent;

            appPackage.should.equal(startAppPackage);
            appActivity.should.equal(startAppActivity);

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9jb21tYW5kcy9nZW5lcmFsLWUyZS1zcGVjcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7b0JBQWlCLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O3VCQUNmLFlBQVk7OzhCQUNmLG9CQUFvQjs7QUFHL0Msa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixRQUFRLENBQUMsU0FBUyxFQUFFLFlBQVk7OztBQUU5QixNQUFJLE1BQU0sWUFBQSxDQUFDO0FBQ1gsUUFBTSxDQUFDOzs7OzsyQ0FDVSx1REFBeUI7OztBQUF4QyxnQkFBTTs7Ozs7OztHQUNQLENBQUMsQ0FBQztBQUNILE9BQUssQ0FBQzs7Ozs7MkNBQ0UsTUFBTSxDQUFDLElBQUksRUFBRTs7Ozs7OztHQUNwQixDQUFDLENBQUM7O0FBRUgsVUFBUSxDQUFDLGVBQWUsRUFBRSxZQUFZOzs7QUFDcEMsTUFBRSxDQUFDLDBDQUEwQyxFQUFFO1VBQ3pDLFVBQVUsRUFDVixXQUFXLEVBSVgsZUFBZSxFQUNmLGdCQUFnQixFQUloQixhQUFhLEVBQ2IsY0FBYzs7Ozs7NkNBWE0sTUFBTSxDQUFDLGlCQUFpQixFQUFFOzs7QUFBOUMsc0JBQVU7OzZDQUNXLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRTs7O0FBQWhELHVCQUFXOztBQUNmLHNCQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xELHVCQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFbEMsMkJBQWUsR0FBRyx3QkFBd0I7QUFDMUMsNEJBQWdCLEdBQUcsc0JBQXNCOzs2Q0FFdkMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxFQUFDLFVBQVUsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFDLENBQUM7Ozs7NkNBRTdELE1BQU0sQ0FBQyxpQkFBaUIsRUFBRTs7O0FBQWpELHlCQUFhOzs2Q0FDVyxNQUFNLENBQUMsa0JBQWtCLEVBQUU7OztBQUFuRCwwQkFBYzs7QUFDbEIseUJBQWEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzVDLDBCQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOzs7Ozs7O0tBQy9DLENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyx5RUFBeUUsRUFBRTtVQUN4RSxlQUFlLEVBQ2YsZ0JBQWdCLEVBQ2hCLG1CQUFtQixFQUluQixXQUFXOzs7O0FBTlgsMkJBQWUsR0FBRyx3QkFBd0I7QUFDMUMsNEJBQWdCLEdBQUcsdUNBQXVDO0FBQzFELCtCQUFtQixHQUFHLDRDQUE0Qzs7NkNBRWhFLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBQyxVQUFVLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsbUJBQW1CLEVBQUMsQ0FBQzs7Ozs2Q0FFcEcsTUFBTSxDQUFDLGtCQUFrQixFQUFFOzs7QUFBaEQsdUJBQVc7O0FBQ2YsdUJBQVcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDOzs7Ozs7O0tBQzFDLENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyxrRUFBa0UsRUFBRTtVQUNqRSxlQUFlLEVBQ2YsZ0JBQWdCLEVBR2hCLFVBQVUsRUFDVixXQUFXOzs7O0FBTFgsMkJBQWUsR0FBRyx3QkFBd0I7QUFDMUMsNEJBQWdCLEdBQUcsZUFBZTs7NkNBQ2hDLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBQyxVQUFVLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBQyxDQUFDOzs7OzZDQUVoRSxNQUFNLENBQUMsaUJBQWlCLEVBQUU7OztBQUE5QyxzQkFBVTs7NkNBQ1csTUFBTSxDQUFDLGtCQUFrQixFQUFFOzs7QUFBaEQsdUJBQVc7O0FBQ2Ysc0JBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3pDLHVCQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOzs7Ozs7O0tBQzVDLENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyxtRUFBbUUsRUFBRTtVQUNsRSxlQUFlLEVBQ2YsZ0JBQWdCLEVBR2hCLFVBQVUsRUFDVixXQUFXOzs7O0FBTFgsMkJBQWUsR0FBRyx3QkFBd0I7QUFDMUMsNEJBQWdCLEdBQUcsZUFBZTs7NkNBQ2hDLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBQyxVQUFVLEVBQUUsZUFBZSxFQUFFLFdBQVcsRUFBRSxnQkFBZ0IsRUFBQyxDQUFDOzs7OzZDQUVqRSxNQUFNLENBQUMsaUJBQWlCLEVBQUU7OztBQUE3QyxzQkFBVTs7NkNBQ1UsTUFBTSxDQUFDLGtCQUFrQixFQUFFOzs7QUFBL0MsdUJBQVc7O0FBQ2Ysc0JBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3pDLHVCQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDOzs7Ozs7O0tBQzVDLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L2Z1bmN0aW9uYWwvY29tbWFuZHMvZ2VuZXJhbC1lMmUtc3BlY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCB7IEFQSURFTU9TX0NBUFMgfSBmcm9tICcuLi9kZXNpcmVkJztcbmltcG9ydCB7IGluaXREcml2ZXIgfSBmcm9tICcuLi9oZWxwZXJzL3Nlc3Npb24nO1xuXG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5cbmRlc2NyaWJlKCdnZW5lcmFsJywgZnVuY3Rpb24gKCkge1xuXG4gIGxldCBkcml2ZXI7XG4gIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgZHJpdmVyID0gYXdhaXQgaW5pdERyaXZlcihBUElERU1PU19DQVBTKTtcbiAgfSk7XG4gIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBkcml2ZXIucXVpdCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnc3RhcnRBY3Rpdml0eScsIGZ1bmN0aW9uICgpIHtcbiAgICBpdCgnc2hvdWxkIGxhdW5jaCBhIG5ldyBwYWNrYWdlIGFuZCBhY3Rpdml0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBhcHBQYWNrYWdlID0gIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50UGFja2FnZSgpO1xuICAgICAgbGV0IGFwcEFjdGl2aXR5ID0gIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKTtcbiAgICAgIGFwcFBhY2thZ2Uuc2hvdWxkLmVxdWFsKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJyk7XG4gICAgICBhcHBBY3Rpdml0eS5zaG91bGQuZXF1YWwoJy5BcGlEZW1vcycpO1xuXG4gICAgICBsZXQgc3RhcnRBcHBQYWNrYWdlID0gJ2lvLmFwcGl1bS5hbmRyb2lkLmFwaXMnO1xuICAgICAgbGV0IHN0YXJ0QXBwQWN0aXZpdHkgPSAnLnZpZXcuU3BsaXRUb3VjaFZpZXcnO1xuXG4gICAgICBhd2FpdCBkcml2ZXIuc3RhcnRBY3Rpdml0eSh7YXBwUGFja2FnZTogc3RhcnRBcHBQYWNrYWdlLCBhcHBBY3Rpdml0eTogc3RhcnRBcHBBY3Rpdml0eX0pO1xuXG4gICAgICBsZXQgbmV3QXBwUGFja2FnZSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudFBhY2thZ2UoKTtcbiAgICAgIGxldCBuZXdBcHBBY3Rpdml0eSA9ICBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudEFjdGl2aXR5KCk7XG4gICAgICBuZXdBcHBQYWNrYWdlLnNob3VsZC5lcXVhbChzdGFydEFwcFBhY2thZ2UpO1xuICAgICAgbmV3QXBwQWN0aXZpdHkuc2hvdWxkLmVxdWFsKHN0YXJ0QXBwQWN0aXZpdHkpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgYmUgYWJsZSB0byBsYXVuY2ggYWN0aXZpdHkgd2l0aCBjdXN0b20gaW50ZW50IHBhcmFtZXRlciBjYXRlZ29yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzdGFydEFwcFBhY2thZ2UgPSAnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcyc7XG4gICAgICBsZXQgc3RhcnRBcHBBY3Rpdml0eSA9ICdpby5hcHBpdW0uYW5kcm9pZC5hcGlzLmFwcC5IZWxsb1dvcmxkJztcbiAgICAgIGxldCBzdGFydEludGVudENhdGVnb3J5ID0gJ2FwcGl1bS5hbmRyb2lkLmludGVudC5jYXRlZ29yeS5TQU1QTEVfQ09ERSc7XG5cbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KHthcHBQYWNrYWdlOiBzdGFydEFwcFBhY2thZ2UsIGFwcEFjdGl2aXR5OiBzdGFydEFwcEFjdGl2aXR5LCBpbnRlbnRDYXRlZ29yeTogc3RhcnRJbnRlbnRDYXRlZ29yeX0pO1xuXG4gICAgICBsZXQgYXBwQWN0aXZpdHkgPSAgYXdhaXQgZHJpdmVyLmdldEN1cnJlbnRBY3Rpdml0eSgpO1xuICAgICAgYXBwQWN0aXZpdHkuc2hvdWxkLmluY2x1ZGUoJ0hlbGxvV29ybGQnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gbGF1bmNoIGFjdGl2aXR5IHdpdGggZG9udFN0b3BBcHBPblJlc2V0ID0gdHJ1ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBzdGFydEFwcFBhY2thZ2UgPSAnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcyc7XG4gICAgICBsZXQgc3RhcnRBcHBBY3Rpdml0eSA9ICcub3MuTW9yc2VDb2RlJztcbiAgICAgIGF3YWl0IGRyaXZlci5zdGFydEFjdGl2aXR5KHthcHBQYWNrYWdlOiBzdGFydEFwcFBhY2thZ2UsIGFwcEFjdGl2aXR5OiBzdGFydEFwcEFjdGl2aXR5fSk7XG5cbiAgICAgIGxldCBhcHBQYWNrYWdlID0gIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50UGFja2FnZSgpO1xuICAgICAgbGV0IGFwcEFjdGl2aXR5ID0gIGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKTtcbiAgICAgIGFwcFBhY2thZ2Uuc2hvdWxkLmVxdWFsKHN0YXJ0QXBwUGFja2FnZSk7XG4gICAgICBhcHBBY3Rpdml0eS5zaG91bGQuZXF1YWwoc3RhcnRBcHBBY3Rpdml0eSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIGxhdW5jaCBhY3Rpdml0eSB3aXRoIGRvbnRTdG9wQXBwT25SZXNldCA9IGZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHN0YXJ0QXBwUGFja2FnZSA9ICdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJztcbiAgICAgIGxldCBzdGFydEFwcEFjdGl2aXR5ID0gJy5vcy5Nb3JzZUNvZGUnO1xuICAgICAgYXdhaXQgZHJpdmVyLnN0YXJ0QWN0aXZpdHkoe2FwcFBhY2thZ2U6IHN0YXJ0QXBwUGFja2FnZSwgYXBwQWN0aXZpdHk6IHN0YXJ0QXBwQWN0aXZpdHl9KTtcblxuICAgICAgbGV0IGFwcFBhY2thZ2UgPSBhd2FpdCBkcml2ZXIuZ2V0Q3VycmVudFBhY2thZ2UoKTtcbiAgICAgIGxldCBhcHBBY3Rpdml0eSA9IGF3YWl0IGRyaXZlci5nZXRDdXJyZW50QWN0aXZpdHkoKTtcbiAgICAgIGFwcFBhY2thZ2Uuc2hvdWxkLmVxdWFsKHN0YXJ0QXBwUGFja2FnZSk7XG4gICAgICBhcHBBY3Rpdml0eS5zaG91bGQuZXF1YWwoc3RhcnRBcHBBY3Rpdml0eSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uIn0=
