'use strict';

var _slicedToArray = require('babel-runtime/helpers/sliced-to-array')['default'];

var _getIterator = require('babel-runtime/core-js/get-iterator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _2 = require('../..');

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

_chai2['default'].use(_chaiAsPromised2['default']);
_chai2['default'].should();

// Error codes and messages have been added according to JsonWireProtocol see
// https://code.google.com/p/selenium/wiki/JsonWireProtocol#Response_Status_Codes
var errorsList = [{ errorName: 'NoSuchDriverError',
  errorMsg: 'A session is either terminated or not started',
  errorCode: 6 }, { errorName: 'NoSuchElementError',
  errorMsg: 'An element could not be located on the page using the ' + 'given search parameters.',
  errorCode: 7 }, { errorName: 'NoSuchFrameError',
  errorMsg: 'A request to switch to a frame could not be satisfied ' + 'because the frame could not be found.',
  errorCode: 8 }, { errorName: 'UnknownCommandError',
  errorMsg: 'The requested resource could not be found, or a request ' + 'was received using an HTTP method that is not supported by ' + 'the mapped resource.',
  errorCode: 9 }, { errorName: 'StaleElementReferenceError',
  errorMsg: 'An element command failed because the referenced element is ' + 'no longer attached to the DOM.',
  errorCode: 10 }, { errorName: 'ElementNotVisibleError',
  errorMsg: 'An element command could not be completed because the ' + 'element is not visible on the page.',
  errorCode: 11 }, { errorName: 'InvalidElementStateError',
  errorMsg: 'An element command could not be completed because the element ' + 'is in an invalid state (e.g. attempting to click a disabled ' + 'element).',
  errorCode: 12 }, { errorName: 'UnknownError',
  errorMsg: 'An unknown server-side error occurred while processing the ' + 'command.',
  errorCode: 13 }, { errorName: 'ElementIsNotSelectableError',
  errorMsg: 'An attempt was made to select an element that cannot ' + 'be selected.',
  errorCode: 15 }, { errorName: 'JavaScriptError',
  errorMsg: 'An error occurred while executing user supplied JavaScript.',
  errorCode: 17 }, { errorName: 'XPathLookupError',
  errorMsg: 'An error occurred while searching for an element by XPath.',
  errorCode: 19 }, { errorName: 'TimeoutError',
  errorMsg: 'An operation did not complete before its timeout expired.',
  errorCode: 21 }, { errorName: 'NoSuchWindowError',
  errorMsg: 'A request to switch to a different window could not be ' + 'satisfied because the window could not be found.',
  errorCode: 23 }, { errorName: 'InvalidCookieDomainError',
  errorMsg: 'An illegal attempt was made to set a cookie under a different ' + 'domain than the current page.',
  errorCode: 24 }, { errorName: 'UnableToSetCookieError',
  errorMsg: 'A request to set a cookie\'s value could not be satisfied.',
  errorCode: 25 }, { errorName: 'UnexpectedAlertOpenError',
  errorMsg: 'A modal dialog was open, blocking this operation',
  errorCode: 26 }, { errorName: 'NoAlertOpenError',
  errorMsg: 'An attempt was made to operate on a modal dialog when one was ' + 'not open.',
  errorCode: 27 }, { errorName: 'ScriptTimeoutError',
  errorMsg: 'A script did not complete before its timeout expired.',
  errorCode: 28 }, { errorName: 'InvalidElementCoordinatesError',
  errorMsg: 'The coordinates provided to an interactions operation are ' + 'invalid.',
  errorCode: 29 }, { errorName: 'IMENotAvailableError',
  errorMsg: 'IME was not available.',
  errorCode: 30 }, { errorName: 'IMEEngineActivationFailedError',
  errorMsg: 'An IME engine could not be started.',
  errorCode: 31 }, { errorName: 'InvalidSelectorError',
  errorMsg: 'Argument was an invalid selector (e.g. XPath/CSS).',
  errorCode: 32 }, { errorName: 'SessionNotCreatedError',
  errorMsg: 'A new session could not be created.',
  errorCode: 33 }, { errorName: 'MoveTargetOutOfBoundsError',
  errorMsg: 'Target provided for a move action is out of bounds.',
  errorCode: 34 }, { errorName: 'NotYetImplementedError',
  errorMsg: 'Method has not yet been implemented',
  errorCode: 13 }];

describe('errors', function () {
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    var _loop = function () {
      var error = _step.value;

      it(error.errorName + ' should have correct code and messg', function () {
        new _2.errors[error.errorName]().should.have.property('jsonwpCode', error.errorCode);
        new _2.errors[error.errorName]().should.have.property('message', error.errorMsg);
      });
    };

    for (var _iterator = _getIterator(errorsList), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      _loop();
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator['return']) {
        _iterator['return']();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  it('BadParametersError should not have code and should have messg', function () {
    new _2.errors.BadParametersError().should.not.have.property('jsonwpCode');
    new _2.errors.BadParametersError().should.have.property('message');
  });
  it('ProxyRequestError should have message and jsonwp', function () {
    new _2.errors.ProxyRequestError().should.have.property('jsonwp');
    new _2.errors.ProxyRequestError().should.have.property('message');
  });
});
describe('errorFromCode', function () {
  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    var _loop2 = function () {
      var error = _step2.value;

      if (error.errorName !== 'NotYetImplementedError') {
        it(error.errorCode + ' should return correct error', function () {
          (0, _2.errorFromCode)(error.errorCode).should.have.property('jsonwpCode', error.errorCode);
          (0, _2.errorFromCode)(error.errorCode).should.have.property('message', error.errorMsg);
          if (!_lodash2['default'].includes([13, 33], error.errorCode)) {
            (0, _2.errorFromCode)(error.errorCode, 'abcd').should.have.property('jsonwpCode', error.errorCode);
            (0, _2.errorFromCode)(error.errorCode, 'abcd').should.have.property('message', 'abcd');
          }
        });
      }
    };

    for (var _iterator2 = _getIterator(errorsList), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      _loop2();
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2['return']) {
        _iterator2['return']();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }

  it('should throw unknown error for unknown code', function () {
    (0, _2.errorFromCode)(99).should.have.property('jsonwpCode', 13);
    (0, _2.errorFromCode)(99).should.have.property('message', 'An unknown server-side error occurred ' + 'while processing the command.');
  });
});
describe('w3c Status Codes', function () {
  it('should match the correct error codes', function () {
    var non400Errors = [['NoSuchDriverError', 404], ['JavaScriptError', 500], ['MoveTargetOutOfBoundsError', 500], ['NoSuchCookieError', 404], ['NoSuchElementError', 404], ['ScriptTimeoutError', 408], ['SessionNotCreatedError', 500], ['TimeoutError', 408], ['UnableToSetCookieError', 500], ['UnableToCaptureScreen', 500], ['UnexpectedAlertOpenError', 500], ['UnknownCommandError', 404], ['UnknownError', 500], ['UnknownMethodError', 405], ['UnsupportedOperationError', 500]];

    // Test the errors that we don't expect to return 400 code
    var _iteratorNormalCompletion3 = true;
    var _didIteratorError3 = false;
    var _iteratorError3 = undefined;

    try {
      for (var _iterator3 = _getIterator(non400Errors), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
        var _step3$value = _slicedToArray(_step3.value, 2);

        var errorName = _step3$value[0];
        var expectedErrorCode = _step3$value[1];

        _2.errors[errorName].should.exist;
        new _2.errors[errorName]().should.have.property('w3cStatus', expectedErrorCode);
      }

      // Test an error that we expect to return 400 code
    } catch (err) {
      _didIteratorError3 = true;
      _iteratorError3 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion3 && _iterator3['return']) {
          _iterator3['return']();
        }
      } finally {
        if (_didIteratorError3) {
          throw _iteratorError3;
        }
      }
    }

    new _2.errors.NoSuchFrameError().should.have.property('w3cStatus', 400);
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvbWpzb253cC9lcnJvcnMtc3BlY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7aUJBQXNDLE9BQU87O29CQUM1QixNQUFNOzs7OzhCQUNJLGtCQUFrQjs7OztzQkFDL0IsUUFBUTs7OztBQUV0QixrQkFBSyxHQUFHLDZCQUFnQixDQUFDO0FBQ3pCLGtCQUFLLE1BQU0sRUFBRSxDQUFDOzs7O0FBSWQsSUFBSSxVQUFVLEdBQUcsQ0FDZixFQUFDLFNBQVMsRUFBRSxtQkFBbUI7QUFDOUIsVUFBUSxFQUFFLCtDQUErQztBQUN6RCxXQUFTLEVBQUUsQ0FBQyxFQUFDLEVBQ2QsRUFBQyxTQUFTLEVBQUUsb0JBQW9CO0FBQy9CLFVBQVEsRUFBRSx3REFBd0QsR0FDeEQsMEJBQTBCO0FBQ3BDLFdBQVMsRUFBRSxDQUFDLEVBQUMsRUFDZCxFQUFDLFNBQVMsRUFBRSxrQkFBa0I7QUFDN0IsVUFBUSxFQUFFLHdEQUF3RCxHQUN4RCx1Q0FBdUM7QUFDakQsV0FBUyxFQUFFLENBQUMsRUFBQyxFQUNkLEVBQUMsU0FBUyxFQUFFLHFCQUFxQjtBQUNoQyxVQUFRLEVBQUUsMERBQTBELEdBQzFELDZEQUE2RCxHQUM3RCxzQkFBc0I7QUFDaEMsV0FBUyxFQUFFLENBQUMsRUFBQyxFQUNkLEVBQUMsU0FBUyxFQUFFLDRCQUE0QjtBQUN2QyxVQUFRLEVBQUUsOERBQThELEdBQzlELGdDQUFnQztBQUMxQyxXQUFTLEVBQUUsRUFBRSxFQUFDLEVBQ2YsRUFBQyxTQUFTLEVBQUUsd0JBQXdCO0FBQ25DLFVBQVEsRUFBRSx3REFBd0QsR0FDeEQscUNBQXFDO0FBQy9DLFdBQVMsRUFBRSxFQUFFLEVBQUMsRUFDZixFQUFDLFNBQVMsRUFBRSwwQkFBMEI7QUFDckMsVUFBUSxFQUFFLGdFQUFnRSxHQUNoRSw4REFBOEQsR0FDOUQsV0FBVztBQUNyQixXQUFTLEVBQUUsRUFBRSxFQUFDLEVBQ2YsRUFBQyxTQUFTLEVBQUUsY0FBYztBQUN6QixVQUFRLEVBQUUs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QUFDLEVBQzlCLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxDQUFDLEVBQ2pDLENBQUMscUJBQXFCLEVBQUUsR0FBRyxDQUFDLEVBQzVCLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQyxFQUNyQixDQUFDLG9CQUFvQixFQUFFLEdBQUcsQ0FBQyxFQUMzQixDQUFDLDJCQUEyQixFQUFFLEdBQUcsQ0FBQyxDQUNuQyxDQUFDOzs7Ozs7OztBQUdGLHlDQUEyQyxZQUFZLGlIQUFFOzs7WUFBL0MsU0FBUztZQUFFLGlCQUFpQjs7QUFDcEMsa0JBQU8sU0FBUyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUMvQixBQUFDLFlBQUksVUFBTyxTQUFTLENBQUMsRUFBRSxDQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO09BQ2hGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHRCxBQUFDLFFBQUksVUFBTyxnQkFBZ0IsRUFBRSxDQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztHQUN4RSxDQUFDLENBQUM7Q0FDSixDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9tanNvbndwL2Vycm9ycy1zcGVjcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVycm9ycywgZXJyb3JGcm9tQ29kZSB9IGZyb20gJy4uLy4uJztcbmltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IGNoYWlBc1Byb21pc2VkIGZyb20gJ2NoYWktYXMtcHJvbWlzZWQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY2hhaS51c2UoY2hhaUFzUHJvbWlzZWQpO1xuY2hhaS5zaG91bGQoKTtcblxuLy8gRXJyb3IgY29kZXMgYW5kIG1lc3NhZ2VzIGhhdmUgYmVlbiBhZGRlZCBhY2NvcmRpbmcgdG8gSnNvbldpcmVQcm90b2NvbCBzZWVcbi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avc2VsZW5pdW0vd2lraS9Kc29uV2lyZVByb3RvY29sI1Jlc3BvbnNlX1N0YXR1c19Db2Rlc1xubGV0IGVycm9yc0xpc3QgPSBbXG4gIHtlcnJvck5hbWU6ICdOb1N1Y2hEcml2ZXJFcnJvcicsXG4gICBlcnJvck1zZzogJ0Egc2Vzc2lvbiBpcyBlaXRoZXIgdGVybWluYXRlZCBvciBub3Qgc3RhcnRlZCcsXG4gICBlcnJvckNvZGU6IDZ9LFxuICB7ZXJyb3JOYW1lOiAnTm9TdWNoRWxlbWVudEVycm9yJyxcbiAgIGVycm9yTXNnOiAnQW4gZWxlbWVudCBjb3VsZCBub3QgYmUgbG9jYXRlZCBvbiB0aGUgcGFnZSB1c2luZyB0aGUgJyArXG4gICAgICAgICAgICAgJ2dpdmVuIHNlYXJjaCBwYXJhbWV0ZXJzLicsXG4gICBlcnJvckNvZGU6IDd9LFxuICB7ZXJyb3JOYW1lOiAnTm9TdWNoRnJhbWVFcnJvcicsXG4gICBlcnJvck1zZzogJ0EgcmVxdWVzdCB0byBzd2l0Y2ggdG8gYSBmcmFtZSBjb3VsZCBub3QgYmUgc2F0aXNmaWVkICcgK1xuICAgICAgICAgICAgICdiZWNhdXNlIHRoZSBmcmFtZSBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgIGVycm9yQ29kZTogOH0sXG4gIHtlcnJvck5hbWU6ICdVbmtub3duQ29tbWFuZEVycm9yJyxcbiAgIGVycm9yTXNnOiAnVGhlIHJlcXVlc3RlZCByZXNvdXJjZSBjb3VsZCBub3QgYmUgZm91bmQsIG9yIGEgcmVxdWVzdCAnICtcbiAgICAgICAgICAgICAnd2FzIHJlY2VpdmVkIHVzaW5nIGFuIEhUVFAgbWV0aG9kIHRoYXQgaXMgbm90IHN1cHBvcnRlZCBieSAnICtcbiAgICAgICAgICAgICAndGhlIG1hcHBlZCByZXNvdXJjZS4nLFxuICAgZXJyb3JDb2RlOiA5fSxcbiAge2Vycm9yTmFtZTogJ1N0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yJyxcbiAgIGVycm9yTXNnOiAnQW4gZWxlbWVudCBjb21tYW5kIGZhaWxlZCBiZWNhdXNlIHRoZSByZWZlcmVuY2VkIGVsZW1lbnQgaXMgJyArXG4gICAgICAgICAgICAgJ25vIGxvbmdlciBhdHRhY2hlZCB0byB0aGUgRE9NLicsXG4gICBlcnJvckNvZGU6IDEwfSxcbiAge2Vycm9yTmFtZTogJ0VsZW1lbnROb3RWaXNpYmxlRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlbGVtZW50IGNvbW1hbmQgY291bGQgbm90IGJlIGNvbXBsZXRlZCBiZWNhdXNlIHRoZSAnICtcbiAgICAgICAgICAgICAnZWxlbWVudCBpcyBub3QgdmlzaWJsZSBvbiB0aGUgcGFnZS4nLFxuICAgZXJyb3JDb2RlOiAxMX0sXG4gIHtlcnJvck5hbWU6ICdJbnZhbGlkRWxlbWVudFN0YXRlRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlbGVtZW50IGNvbW1hbmQgY291bGQgbm90IGJlIGNvbXBsZXRlZCBiZWNhdXNlIHRoZSBlbGVtZW50ICcgK1xuICAgICAgICAgICAgICdpcyBpbiBhbiBpbnZhbGlkIHN0YXRlIChlLmcuIGF0dGVtcHRpbmcgdG8gY2xpY2sgYSBkaXNhYmxlZCAnICtcbiAgICAgICAgICAgICAnZWxlbWVudCkuJyxcbiAgIGVycm9yQ29kZTogMTJ9LFxuICB7ZXJyb3JOYW1lOiAnVW5rbm93bkVycm9yJyxcbiAgIGVycm9yTXNnOiAnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIHRoZSAnICtcbiAgICAgICAgICAgICAnY29tbWFuZC4nLFxuICAgZXJyb3JDb2RlOiAxM30sXG4gIHtlcnJvck5hbWU6ICdFbGVtZW50SXNOb3RTZWxlY3RhYmxlRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBhdHRlbXB0IHdhcyBtYWRlIHRvIHNlbGVjdCBhbiBlbGVtZW50IHRoYXQgY2Fubm90ICcgK1xuICAgICAgICAgICAgICdiZSBzZWxlY3RlZC4nLFxuICAgZXJyb3JDb2RlOiAxNX0sXG4gIHtlcnJvck5hbWU6ICdKYXZhU2NyaXB0RXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBleGVjdXRpbmcgdXNlciBzdXBwbGllZCBKYXZhU2NyaXB0LicsXG4gICBlcnJvckNvZGU6IDE3fSxcbiAge2Vycm9yTmFtZTogJ1hQYXRoTG9va3VwRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzZWFyY2hpbmcgZm9yIGFuIGVsZW1lbnQgYnkgWFBhdGguJyxcbiAgIGVycm9yQ29kZTogMTl9LFxuICB7ZXJyb3JOYW1lOiAnVGltZW91dEVycm9yJyxcbiAgIGVycm9yTXNnOiAnQW4gb3BlcmF0aW9uIGRpZCBub3QgY29tcGxldGUgYmVmb3JlIGl0cyB0aW1lb3V0IGV4cGlyZWQuJyxcbiAgIGVycm9yQ29kZTogMjF9LFxuICB7ZXJyb3JOYW1lOiAnTm9TdWNoV2luZG93RXJyb3InLFxuICAgZXJyb3JNc2c6ICdBIHJlcXVlc3QgdG8gc3dpdGNoIHRvIGEgZGlmZmVyZW50IHdpbmRvdyBjb3VsZCBub3QgYmUgJyArXG4gICAgICAgICAgICAgJ3NhdGlzZmllZCBiZWNhdXNlIHRoZSB3aW5kb3cgY291bGQgbm90IGJlIGZvdW5kLicsXG4gICBlcnJvckNvZGU6IDIzfSxcbiAge2Vycm9yTmFtZTogJ0ludmFsaWRDb29raWVEb21haW5FcnJvcicsXG4gICBlcnJvck1zZzogJ0FuIGlsbGVnYWwgYXR0ZW1wdCB3YXMgbWFkZSB0byBzZXQgYSBjb29raWUgdW5kZXIgYSBkaWZmZXJlbnQgJyArXG4gICAgICAgICAgICAgJ2RvbWFpbiB0aGFuIHRoZSBjdXJyZW50IHBhZ2UuJyxcbiAgIGVycm9yQ29kZTogMjR9LFxuICB7ZXJyb3JOYW1lOiAnVW5hYmxlVG9TZXRDb29raWVFcnJvcicsXG4gICBlcnJvck1zZzogYEEgcmVxdWVzdCB0byBzZXQgYSBjb29raWUncyB2YWx1ZSBjb3VsZCBub3QgYmUgc2F0aXNmaWVkLmAsXG4gICBlcnJvckNvZGU6IDI1fSxcbiAge2Vycm9yTmFtZTogJ1VuZXhwZWN0ZWRBbGVydE9wZW5FcnJvcicsXG4gICBlcnJvck1zZzogJ0EgbW9kYWwgZGlhbG9nIHdhcyBvcGVuLCBibG9ja2luZyB0aGlzIG9wZXJhdGlvbicsXG4gICBlcnJvckNvZGU6IDI2fSxcbiAge2Vycm9yTmFtZTogJ05vQWxlcnRPcGVuRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBhdHRlbXB0IHdhcyBtYWRlIHRvIG9wZXJhdGUgb24gYSBtb2RhbCBkaWFsb2cgd2hlbiBvbmUgd2FzICcgK1xuICAgICAgICAgICAgICdub3Qgb3Blbi4nLFxuICAgZXJyb3JDb2RlOiAyN30sXG4gIHtlcnJvck5hbWU6ICdTY3JpcHRUaW1lb3V0RXJyb3InLFxuICAgZXJyb3JNc2c6ICdBIHNjcmlwdCBkaWQgbm90IGNvbXBsZXRlIGJlZm9yZSBpdHMgdGltZW91dCBleHBpcmVkLicsXG4gICBlcnJvckNvZGU6IDI4fSxcbiAge2Vycm9yTmFtZTogJ0ludmFsaWRFbGVtZW50Q29vcmRpbmF0ZXNFcnJvcicsXG4gICBlcnJvck1zZzogJ1RoZSBjb29yZGluYXRlcyBwcm92aWRlZCB0byBhbiBpbnRlcmFjdGlvbnMgb3BlcmF0aW9uIGFyZSAnICtcbiAgICAgICAgICAgICAnaW52YWxpZC4nLFxuICAgZXJyb3JDb2RlOiAyOX0sXG4gIHtlcnJvck5hbWU6ICdJTUVOb3RBdmFpbGFibGVFcnJvcicsXG4gICBlcnJvck1zZzogJ0lNRSB3YXMgbm90IGF2YWlsYWJsZS4nLFxuICAgZXJyb3JDb2RlOiAzMH0sXG4gIHtlcnJvck5hbWU6ICdJTUVFbmdpbmVBY3RpdmF0aW9uRmFpbGVkRXJyb3InLFxuICAgZXJyb3JNc2c6ICdBbiBJTUUgZW5naW5lIGNvdWxkIG5vdCBiZSBzdGFydGVkLicsXG4gICBlcnJvckNvZGU6IDMxfSxcbiAge2Vycm9yTmFtZTogJ0ludmFsaWRTZWxlY3RvckVycm9yJyxcbiAgIGVycm9yTXNnOiAnQXJndW1lbnQgd2FzIGFuIGludmFsaWQgc2VsZWN0b3IgKGUuZy4gWFBhdGgvQ1NTKS4nLFxuICAgZXJyb3JDb2RlOiAzMn0sXG4gIHtlcnJvck5hbWU6ICdTZXNzaW9uTm90Q3JlYXRlZEVycm9yJyxcbiAgIGVycm9yTXNnOiAnQSBuZXcgc2Vzc2lvbiBjb3VsZCBub3QgYmUgY3JlYXRlZC4nLFxuICAgZXJyb3JDb2RlOiAzM30sXG4gIHtlcnJvck5hbWU6ICdNb3ZlVGFyZ2V0T3V0T2ZCb3VuZHNFcnJvcicsXG4gICBlcnJvck1zZzogJ1RhcmdldCBwcm92aWRlZCBmb3IgYSBtb3ZlIGFjdGlvbiBpcyBvdXQgb2YgYm91bmRzLicsXG4gICBlcnJvckNvZGU6IDM0fSxcbiAge2Vycm9yTmFtZTogJ05vdFlldEltcGxlbWVudGVkRXJyb3InLFxuICAgZXJyb3JNc2c6ICdNZXRob2QgaGFzIG5vdCB5ZXQgYmVlbiBpbXBsZW1lbnRlZCcsXG4gICBlcnJvckNvZGU6IDEzfVxuXTtcblxuZGVzY3JpYmUoJ2Vycm9ycycsICgpID0+IHtcbiAgZm9yIChsZXQgZXJyb3Igb2YgZXJyb3JzTGlzdCkge1xuICAgIGl0KGVycm9yLmVycm9yTmFtZSArICcgc2hvdWxkIGhhdmUgY29ycmVjdCBjb2RlIGFuZCBtZXNzZycsICgpID0+IHtcbiAgICAgIG5ldyBlcnJvcnNbZXJyb3IuZXJyb3JOYW1lXSgpXG4gICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScsIGVycm9yLmVycm9yQ29kZSk7XG4gICAgICBuZXcgZXJyb3JzW2Vycm9yLmVycm9yTmFtZV0oKVxuICAgICAgICAuc2hvdWxkLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnLCBlcnJvci5lcnJvck1zZyk7XG4gICAgfSk7XG4gIH1cbiAgaXQoJ0JhZFBhcmFtZXRlcnNFcnJvciBzaG91bGQgbm90IGhhdmUgY29kZSBhbmQgc2hvdWxkIGhhdmUgbWVzc2cnLCAoKSA9PiB7XG4gICAgbmV3IGVycm9ycy5CYWRQYXJhbWV0ZXJzRXJyb3IoKVxuICAgICAgLnNob3VsZC5ub3QuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScpO1xuICAgIG5ldyBlcnJvcnMuQmFkUGFyYW1ldGVyc0Vycm9yKClcbiAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScpO1xuICB9KTtcbiAgaXQoJ1Byb3h5UmVxdWVzdEVycm9yIHNob3VsZCBoYXZlIG1lc3NhZ2UgYW5kIGpzb253cCcsICgpID0+IHtcbiAgICBuZXcgZXJyb3JzLlByb3h5UmVxdWVzdEVycm9yKClcbiAgICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdqc29ud3AnKTtcbiAgICBuZXcgZXJyb3JzLlByb3h5UmVxdWVzdEVycm9yKClcbiAgICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdtZXNzYWdlJyk7XG4gIH0pO1xufSk7XG5kZXNjcmliZSgnZXJyb3JGcm9tQ29kZScsICgpID0+IHtcbiAgZm9yIChsZXQgZXJyb3Igb2YgZXJyb3JzTGlzdCkge1xuICAgIGlmIChlcnJvci5lcnJvck5hbWUgIT09ICdOb3RZZXRJbXBsZW1lbnRlZEVycm9yJykge1xuICAgICAgaXQoZXJyb3IuZXJyb3JDb2RlICsgJyBzaG91bGQgcmV0dXJuIGNvcnJlY3QgZXJyb3InLCAoKSA9PiB7XG4gICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlKVxuICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScsIGVycm9yLmVycm9yQ29kZSk7XG4gICAgICAgIGVycm9yRnJvbUNvZGUoZXJyb3IuZXJyb3JDb2RlKVxuICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScsIGVycm9yLmVycm9yTXNnKTtcbiAgICAgICAgaWYgKCFfLmluY2x1ZGVzKFsxMywgMzNdLCBlcnJvci5lcnJvckNvZGUpKSB7XG4gICAgICAgICAgZXJyb3JGcm9tQ29kZShlcnJvci5lcnJvckNvZGUsICdhYmNkJylcbiAgICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnanNvbndwQ29kZScsIGVycm9yLmVycm9yQ29kZSk7XG4gICAgICAgICAgZXJyb3JGcm9tQ29kZShlcnJvci5lcnJvckNvZGUsICdhYmNkJylcbiAgICAgICAgICAgIC5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnbWVzc2FnZScsICdhYmNkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpdCgnc2hvdWxkIHRocm93IHVua25vd24gZXJyb3IgZm9yIHVua25vd24gY29kZScsICgpID0+IHtcbiAgICBlcnJvckZyb21Db2RlKDk5KVxuICAgICAgLnNob3VsZC5oYXZlLnByb3BlcnR5KCdqc29ud3BDb2RlJywgMTMpO1xuICAgIGVycm9yRnJvbUNvZGUoOTkpXG4gICAgICAuc2hvdWxkLmhhdmUucHJvcGVydHkoJ21lc3NhZ2UnLCAnQW4gdW5rbm93biBzZXJ2ZXItc2lkZSBlcnJvciBvY2N1cnJlZCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3aGlsZSBwcm9jZXNzaW5nIHRoZSBjb21tYW5kLicpO1xuICB9KTtcbn0pO1xuZGVzY3JpYmUoJ3czYyBTdGF0dXMgQ29kZXMnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgbWF0Y2ggdGhlIGNvcnJlY3QgZXJyb3IgY29kZXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IG5vbjQwMEVycm9ycyA9IFtcbiAgICAgIFsnTm9TdWNoRHJpdmVyRXJyb3InLCA0MDRdLFxuICAgICAgWydKYXZhU2NyaXB0RXJyb3InLCA1MDBdLFxuICAgICAgWydNb3ZlVGFyZ2V0T3V0T2ZCb3VuZHNFcnJvcicsIDUwMF0sXG4gICAgICBbJ05vU3VjaENvb2tpZUVycm9yJywgNDA0XSxcbiAgICAgIFsnTm9TdWNoRWxlbWVudEVycm9yJywgNDA0XSxcbiAgICAgIFsnU2NyaXB0VGltZW91dEVycm9yJywgNDA4XSxcbiAgICAgIFsnU2Vzc2lvbk5vdENyZWF0ZWRFcnJvcicsIDUwMF0sXG4gICAgICBbJ1RpbWVvdXRFcnJvcicsIDQwOF0sXG4gICAgICBbJ1VuYWJsZVRvU2V0Q29va2llRXJyb3InLCA1MDBdLFxuICAgICAgWydVbmFibGVUb0NhcHR1cmVTY3JlZW4nLCA1MDBdLFxuICAgICAgWydVbmV4cGVjdGVkQWxlcnRPcGVuRXJyb3InLCA1MDBdLFxuICAgICAgWydVbmtub3duQ29tbWFuZEVycm9yJywgNDA0XSxcbiAgICAgIFsnVW5rbm93bkVycm9yJywgNTAwXSxcbiAgICAgIFsnVW5rbm93bk1ldGhvZEVycm9yJywgNDA1XSxcbiAgICAgIFsnVW5zdXBwb3J0ZWRPcGVyYXRpb25FcnJvcicsIDUwMF0sXG4gICAgXTtcblxuICAgIC8vIFRlc3QgdGhlIGVycm9ycyB0aGF0IHdlIGRvbid0IGV4cGVjdCB0byByZXR1cm4gNDAwIGNvZGVcbiAgICBmb3IgKGxldCBbZXJyb3JOYW1lLCBleHBlY3RlZEVycm9yQ29kZV0gb2Ygbm9uNDAwRXJyb3JzKSB7XG4gICAgICBlcnJvcnNbZXJyb3JOYW1lXS5zaG91bGQuZXhpc3Q7XG4gICAgICAobmV3IGVycm9yc1tlcnJvck5hbWVdKCkpLnNob3VsZC5oYXZlLnByb3BlcnR5KCd3M2NTdGF0dXMnLCBleHBlY3RlZEVycm9yQ29kZSk7XG4gICAgfVxuXG4gICAgLy8gVGVzdCBhbiBlcnJvciB0aGF0IHdlIGV4cGVjdCB0byByZXR1cm4gNDAwIGNvZGVcbiAgICAobmV3IGVycm9ycy5Ob1N1Y2hGcmFtZUVycm9yKCkpLnNob3VsZC5oYXZlLnByb3BlcnR5KCd3M2NTdGF0dXMnLCA0MDApO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
